# ADR-001: 项目整合策略

> 状态: proposed | 日期: 2025-01-15 | 决策者: TBD

## 背景

AttackProbe项目需要整合以下已有资源：
1. **ai-brain**: 知识管理框架
2. **llm-security-bas**: LLM安全验证MVP（58个攻击用例）

需要决定如何整合这些资源到新项目中。

## 可选方案

### 方案A: 直接复用llm-security-bas代码

**做法**: 将llm-security-bas代码作为子模块或直接合并到AttackProbe

**优点**:
- 复用已验证的代码
- 节省开发时间

**缺点**:
- 可能存在架构不一致
- 需要重构适配

### 方案B: 参考设计，重新实现

**做法**: 参考llm-security-bas的设计，但重新编写代码

**优点**:
- 架构统一
- 代码更整洁

**缺点**:
- 开发时间增加
- 可能引入新Bug

### 方案C: 模块化整合

**做法**: 将llm-security-bas作为独立模块（LLM安全引擎），新增传统BAS引擎，统一上层API

**优点**:
- 最大程度复用
- 架构清晰
- 可独立演进

**缺点**:
- 模块间接口设计复杂

## 决策

**推荐方案C: 模块化整合**

```
AttackProbe/
├── internal/engine/
│   ├── llm/          # 直接复用llm-security-bas核心代码
│   └── traditional/  # 新开发传统BAS引擎
```

## 理由

1. 最大程度复用已验证代码，降低风险
2. 架构清晰，便于后续扩展
3. 符合6个月时间约束

## 影响

- 需要定义统一的攻击引擎接口
- llm-security-bas的model、service、judge模块可直接复用
- 前端可在现有基础上扩展

## 变更记录

| 日期 | 变更内容 |
|------|---------|
| 2025-01-15 | 创建初稿 |
