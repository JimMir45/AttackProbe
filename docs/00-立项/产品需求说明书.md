# AttackProbe 产品需求说明书

> 版本: v0.1 (草稿) | 创建日期: 2025-01-15 | 状态: 待评审

## 1. 产品概述

### 1.1 产品名称
AttackProbe (攻击模拟有效性验证平台)

### 1.2 产品定位
面向企业安全运营团队的**自动化攻击模拟与有效性验证平台**，帮助安全团队持续验证现有防护体系的实际效果。

### 1.3 目标用户

| 用户角色 | 使用场景 | 核心诉求 |
|---------|---------|---------|
| 安全运营工程师 | 日常安全验证 | 快速发现防护漏洞 |
| 安全团队负责人 | 安全态势评估 | 量化安全指标，汇报管理层 |
| 红队/渗透测试人员 | 攻击模拟 | 自动化攻击库，提升效率 |
| 合规审计人员 | 合规检查 | 验证安全控制有效性 |

### 1.4 核心价值

1. **持续验证** - 不是一次性扫描，而是持续的安全态势验证
2. **攻击视角** - 从攻击者角度验证防护有效性
3. **量化指标** - 提供可量化的安全防护成功率
4. **覆盖全面** - 传统安全 + AI/LLM新兴安全

---

## 2. 业务边界

### 2.1 范围内 (In Scope)

- 资产管理与目标配置
- 攻击用例库管理
- 自动化攻击模拟执行
- 有效性验证与结果判定
- 验证报告生成与导出
- LLM大模型安全验证

### 2.2 范围外 (Out of Scope)

- 漏洞利用/实际渗透（仅模拟验证，不做真实攻击）
- 防护设备管理与配置
- SIEM/SOC集成（1.0版本暂不支持）
- 多租户SaaS模式（1.0版本仅支持私有化部署）

---

## 3. 功能需求

### 3.1 功能架构

```
┌─────────────────────────────────────────────────────────────────┐
│                         AttackProbe 1.0                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                     展示层 (Web UI)                      │   │
│  │  仪表盘 | 资产管理 | 任务中心 | 报告中心 | 系统设置      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                     业务层 (API)                         │   │
│  │  目标管理 | 用例管理 | 任务调度 | 结果判定 | 报告生成    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                   攻击模拟引擎                           │   │
│  │  ┌─────────────────┐   ┌─────────────────────────────┐  │   │
│  │  │  传统BAS引擎     │   │      LLM安全BAS引擎         │  │   │
│  │  │ • 漏洞扫描模拟   │   │ • 提示词注入攻击           │  │   │
│  │  │ • 网络攻击模拟   │   │ • 越狱攻击                 │  │   │
│  │  │ • ATT&CK映射    │   │ • 敏感信息泄露             │  │   │
│  │  └─────────────────┘   └─────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                     数据层                               │   │
│  │  SQLite数据库 | 攻击用例库 | 配置存储 | 结果存储         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 功能清单

#### P0 - 核心功能 (1.0必须)

| 模块 | 功能点 | 描述 | 优先级 |
|------|-------|------|--------|
| **资产管理** | 目标添加 | 添加待验证的目标(URL/IP/LLM端点) | P0 |
| | 目标编辑/删除 | 管理目标配置 | P0 |
| | 连通性测试 | 验证目标可达性 | P0 |
| | 目标分组 | 按业务/类型分组管理 | P1 |
| **用例管理** | 内置用例库 | 预置攻击用例(传统+LLM) | P0 |
| | 用例浏览 | 按分类、风险等级浏览 | P0 |
| | 用例启用/禁用 | 控制用例是否参与测试 | P0 |
| | 自定义用例 | 用户添加自定义攻击用例 | P1 |
| **任务中心** | 创建任务 | 选择目标和用例创建验证任务 | P0 |
| | 任务执行 | 自动化执行攻击模拟 | P0 |
| | 进度查看 | 实时查看执行进度 | P0 |
| | 任务取消 | 终止正在执行的任务 | P0 |
| | 历史任务 | 查看历史任务列表 | P0 |
| **结果判定** | 自动判定 | 基于规则自动判断防护是否有效 | P0 |
| | 关键词匹配 | 响应关键词匹配判定 | P0 |
| **报告中心** | 结果统计 | 防护成功率、攻击类型分布 | P0 |
| | 详细结果 | 每个用例的请求响应详情 | P0 |
| | 报告导出 | 导出PDF/Excel报告 | P1 |
| **系统设置** | 基础配置 | 并发数、超时时间等 | P0 |
| | 用户管理 | 登录认证(1.0简化版) | P1 |

#### P1 - 增强功能 (1.0可选)

| 功能 | 描述 |
|------|------|
| 定时任务 | 周期性自动执行验证任务 |
| 告警通知 | 发现高危漏洞时邮件/钉钉告警 |
| ATT&CK映射 | 攻击用例与ATT&CK框架映射 |
| API开放 | 对外提供REST API |

### 3.3 LLM安全模块（复用已有）

基于 `llm-security-bas` 项目，已有能力：

| 攻击类型 | 用例数 | 状态 |
|---------|-------|------|
| 提示词注入 | 20 | 已有 |
| 越狱攻击 | 18 | 已有 |
| 敏感信息泄露 | 15 | 已有 |
| 其他攻击 | 5 | 已有 |
| **合计** | **58** | **可直接复用** |

---

## 4. 非功能需求

### 4.1 性能要求

| 指标 | 要求 |
|------|------|
| 并发任务数 | 支持5个并发任务 |
| 单用例执行时间 | < 30秒 |
| 页面响应时间 | < 2秒 |
| 数据库容量 | 支持10万条结果记录 |

### 4.2 部署要求

| 项目 | 要求 |
|------|------|
| 部署方式 | 单文件部署，无外部依赖 |
| 操作系统 | Linux/Windows/macOS |
| 硬件要求 | 2核4G内存，20G磁盘 |
| 网络要求 | 能访问目标系统即可 |

### 4.3 安全要求

- 敏感配置(API Key等)加密存储
- 操作日志记录
- 基础访问认证

---

## 5. 应用场景

### 场景1: 日常安全验证
安全运营工程师每周执行一次自动化验证，检查WAF、防火墙等防护设备是否正常工作。

### 场景2: 新系统上线验收
新系统上线前，使用BAS验证安全防护配置是否生效。

### 场景3: LLM应用安全评估
企业部署LLM应用(如智能客服)前，验证模型对抗提示词注入等攻击的防护能力。

### 场景4: 安全态势汇报
安全负责人生成月度安全验证报告，量化汇报防护有效性。

---

## 6. 竞品参考

| 产品 | 类型 | 参考点 |
|------|------|--------|
| SafeBreach | 商业BAS | 攻击库设计、报告模板 |
| AttackIQ | 商业BAS | ATT&CK映射方式 |
| Garak (NVIDIA) | 开源LLM安全 | 攻击用例分类 |
| llm-security-bas | 自有 | 直接复用代码 |

---

## 7. 待确认问题

- [ ] 1.0版本是否需要用户认证功能？
- [ ] 传统BAS模块的攻击用例数量要求？
- [ ] 报告导出格式要求（PDF/Word/Excel）？
- [ ] 是否需要对接企业现有LDAP认证？

---

## 变更记录

| 日期 | 版本 | 变更内容 | 作者 |
|------|------|---------|------|
| 2025-01-15 | v0.1 | 初稿创建 | AI-Brain |
